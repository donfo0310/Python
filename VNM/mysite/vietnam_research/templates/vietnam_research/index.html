{% load static %}
<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>VNMビューア</title>

    <!-- css -->
    <link rel="stylesheet" href="{% static 'vietnam_research/css/style.css' %}"> 

    <!-- D3.js -->
    <script src="https://d3js.org/d3.v4.min.js" charset="utf-8"></script>
    <script src="https://d3js.org/d3-path.v1.min.js" charset="utf-8"></script>
    <script src="{% static 'vietnam_research/js/radarChart.js' %}" charset="utf-8"></script>
    <script src="{% static 'vietnam_research/js/lineChart.js' %}" charset="utf-8"></script>
</head>
<body>
    
    <h1>h1タイトルは非表示</h1>

    <!-- Django to Javascript -->
    <script>
        var data1 = [{name: '企業数'}];
        var data1_inner = [];
        var data2 = [{name: '時価総額'}];
        var data2_inner = [];
    </script>
    {% for idx, row in industry.iterrows %}
        <script>
            data1_inner.push({axis: "{{ row.ind_name }}", value: "{{ row.cnt_per }}"})
            data2_inner.push({axis: "{{ row.ind_name }}", value: "{{ row.cap_per }}"})
        </script>
    {% endfor %}
    <script>
        // 数字のidxを変えて代入すると時点を変えたグラフを一緒に表示できる
        data1[0].axes = data1_inner;
        data2[0].axes = data2_inner;
    </script>

    <h2>Todo</h2>
    <p>国の成長期に金融が稼げる理由は？</p>
    <p>
        データ:<br>
        証券コードから業種・会社名の取得<br>
        同業株価上位グラフ5位横並べ<br>
        セクター別リターン<br>
        個社利率<br>
        50万円で大口株主になれる先リスト<br>
        センチメント分析<br>
        配当性向<br>
        ニュース・有報から上方修正先を抽出<br>
        あと何株買えるの？の計算式（excelでやるやつ）をフォームで
    </p>
    <p>スクレイピング: 上場日</p>

    <h2>業種別マクロ分析</h2>
    <p>これで3年分ぐらいを重ねてみたい</p>
    <p>足元の鉱業の不調は、かつてベトナムの主力輸出品であった原油の生産量が原油価格低迷に伴い減少したことが主因と見られる。
        他方、足元で製造業の伸び率が加速している点については、ベトナムに進出した外資系企業による鉄鋼や電機製品などの生産が
        拡大したことに影響されたと見られる。中国やタイに比べて低いとされてきたベトナムの賃金は、近年、上昇が続いており、
        ベトナムに進出した日系企業にとって悩みの種となっている。<BR>
        <a href="https://www.murc.jp/wp-content/uploads/2018/03/report_180316.pdf">MURCベトナム経済の現状と今後の展望(20180316)</a>
    </p>
    <div class="radarChart1" style="display: inline-flex;"></div>
    <div class="radarChart2" style="display: inline-flex;"></div>
    <script>
        var margin = { top: 50, right: 130, bottom: 50, left: 80 };
        var radarChartOptions = {
            w: 290,
            h: 350,
            margin: margin,
            levels: 5,
            roundStrokes: true,
            color: d3.scaleOrdinal().range(["#ff5900"]), // orange
            dotRadius: 3,
            format: '.2f',
            legend: { title: '業種別集計', translateX: 150, translateY: 40 },
            unit: '%'
        };
        RadarChart(".radarChart1", data1, radarChartOptions);
        RadarChart(".radarChart2", data2, radarChartOptions);
    </script>

    <h2>VN-Index</h2>
    {{ vnindex|json_script:"vnindex-json" }}
    <div id="columns"></div>
    <script>
        var vnidx = JSON.parse(document.getElementById('vnindex-json').textContent);
        for (let i in vnidx) {
            document.write(vnidx[i]['01']);
        }
        
        // Object.keys(vnidx).forEach(function(key) {
        //     console.log(vnidx[key]);
        // })
        // for (var item in vnidx) {
        //     console.log(vnidx[item])
        // }
        // LineChart(vnidx);
    </script>

    <h2>ドンから日本円へ</h2>
    ドンを200で割ると、ざっくり日本円になります。
    1,000don -> 5円
    <!-- 同業比較したいから、昇順keyつけてdbから出力 -->
    <!-- 上場日・主な事業・業種・ -->
    <h2>SABサイゴンビール</h2>
    <p>2019/07/16 21:20 当日注文 150株 287,000don（@1,435円 x 150株 = 215,250円）</p>
    <img src="{% static 'vietnam_research/chart/SAB.png' %}" alt="SAB">
    <h2>PHRフオックホア ゴム</h2>
    <p>2019/07/19 08:43 当日注文 680株 65,000don（@325円 x 680株 = 221,000円）</p>
    <img src="{% static 'vietnam_research/chart/PHR.png' %}" alt="PHR">
    <h2>GASペトロベトナムガス</h2>
    <img src="{% static 'vietnam_research/chart/GAS.png' %}" alt="GAS">
    <h2>PPCファーライ火力発電</h2>
    <img src="{% static 'vietnam_research/chart/PPC.png' %}" alt="PPC">
    <h2>FMCサオタ食品</h2>
    <img src="{% static 'vietnam_research/chart/FMC.png' %}" alt="FMC">
    <h2>VHCビンホアン（水産）</h2>
    <img src="{% static 'vietnam_research/chart/VHC.png' %}" alt="VHC">
    <h2>VNMビナミルク</h2>
    <img src="{% static 'vietnam_research/chart/VNM.png' %}" alt="VNM">

    <h2>PERとは</h2>
    <img src="{% static 'vietnam_research/images/PER.png' %}" alt="PER">

    <h2>ベトナム基本情報</h2>
    <table>
        <tbody>
            <tr>
                <th><p>国名</p></th>
                <td><p>ベトナム社会主義共和国 Socialist Republic of Viet Nam</p></td>
            </tr>
            <tr>
                <th><p>面積</p></th>
                <td><p>33万1,690平方キロメートル（2018、出所：外務省）</p></td>
            </tr>
            <tr>
                <th><p>人口</p></th>
                <td><p>約9,370万人（2018、出所：外務省）</p></td>
            </tr>
            <tr>
                <th><p>首都</p></th>
                <td><p>ハノイ</p></td>
            </tr>
            <tr>
                <th><p>言語</p></th>
                <td><p>ベトナム語、ほかに少数民族語</p></td>
            </tr>
            <tr>
                <th><p>宗教</p></th>
                <td><p>仏教（約80％）、そのほかにカトリック、カオダイ教、ホアハオ教など</p></td>
            </tr>
            <tr>
                <th><p>公用語</p></th>
                <td><p>ベトナム語</p></td>
            </tr>
            <tr>
                <th><p>通貨</p></th>
                <td><p>ドン</p></td>
            </tr>
            <tr>
                <th><p>主要産業<br>
                （2017年平均　越統計総局より引用）</p></th>
                <td><p>農林水産業，鉱業，工業</p></td>
            </tr>
            <tr>
                <th><p>GDP<br>
                （2017年平均 越統計総局より引用）</p></th>
                <td><p>約2,235億米ドル</p></td>
            </tr>
            <tr>
                <th><p>経済成長率<br>
                （2017年平均、越統計総局より引用）</p></th>
                <td><p>6.81%</p></td>
            </tr>
        </tbody>
    </table>

    <a href="https://www.jetro.go.jp/world/asia/vn/stat_01.html">基礎的経済指標（日本貿易振興機構 jetro.go.jp）</a>
    <p>※IMFデータをもとにSBI証券が作成を参考に</p>
    <p>ベトナム経済は人口ボーナス期の真っ最中</p>

</body>
</html>